(this.webpackJsonpexchange=this.webpackJsonpexchange||[]).push([[0],{29:function(n,e,t){n.exports=t(41)},39:function(n,e,t){},41:function(n,e,t){"use strict";t.r(e);var r={};t.r(r),t.d(r,"fetchLastRates",(function(){return N})),t.d(r,"mockRates",(function(){return z}));var c={};t.r(c),t.d(c,"getCurrentRate",(function(){return B}));var a={};t.r(a),t.d(a,"fetchAccounts",(function(){return M})),t.d(a,"exchange",(function(){return G}));var o,u=t(1),i=t.n(u),s=t(11),f=t.n(s),l=t(7),d=t(9),b=t(20),p=t(21),m=t(5),v=function(n){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=arguments.length>1?arguments[1]:void 0,c=e[r.type];return c?c(t,r):t}}},O=function(n,e){return"".concat(n,"/").concat(e)},j=O("accounts","FETCH_ACCOUNTS"),g=O("accounts","FETCH_ACCOUNTS_SUCCESS"),y=O("accounts","FETCH_ACCOUNTS_FAIL"),E=O("accounts","EXCHANGE");function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function x(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(t,!0).forEach((function(e){Object(m.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(t).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var C=v({isLoading:!1,hasError:!1,list:[]})((o={},Object(m.a)(o,j,(function(n){return x({},n,{isLoading:!0})})),Object(m.a)(o,g,(function(n,e){return{isLoading:!1,hasError:!1,list:e.payload.data}})),Object(m.a)(o,y,(function(n){return x({},n,{isLoading:!1,hasError:!0})})),Object(m.a)(o,E,(function(n,e){var t=e.payload,r=t.fromAccountId,c=t.toAccountId,a=t.amount,o=t.rate,u=function(e){return n.list.find((function(n){return n.id===e}))},i=u(r),s=u(c),f=n.list.filter((function(n){return[r,c].includes(n.id)}));return i.amount=i.amount-a,s.amount=s.amount+a*o,f.push(i),f.push(s),x({},n,{list:f})})),o));var w,k=O("rates","FETCH_LATEST_RATES"),S=O("rates","FETCH_LATEST_RATES_SUCCESS"),A=O("rates","FETCH_LATEST_RATES_FAIL");function P(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function L(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?P(t,!0).forEach((function(e){Object(m.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P(t).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var R=v({isLoading:!1,hasError:!1,timestamp:null,base:null,rates:[]})((w={},Object(m.a)(w,k,(function(n){return L({},n,{isLoading:!0})})),Object(m.a)(w,S,(function(n,e){var t=e.payload;return n.timestamp>t.data.timestamp?n:L({},n,{isLoading:!1,rates:t.data.rates,timestamp:t.data.timestamp,base:t.data.base})})),Object(m.a)(w,A,(function(n){return L({},n,{isLoading:!1,hasError:!0})})),w)),F=t(14),I=t.n(F),T=t(22),D="https://openexchangerates.org/api/",U="e6f74380a0d1469db8eb2c26f11b5509";function _(){return(_=Object(T.a)(I.a.mark((function n(){var e;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(D,"latest.json?app_id=").concat(U));case 2:if((e=n.sent).ok){n.next=5;break}return n.abrupt("return",Promise.reject({isSuccessful:!1}));case 5:return n.next=7,e.json();case 7:return n.t0=n.sent,n.abrupt("return",{isSuccessful:!0,data:n.t0});case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var N=function(){return function(n){return n({type:k}),function(){return _.apply(this,arguments)}().then((function(e){n({type:S,payload:e})}),(function(){n({type:A})}))}},z=function(){return function(n){n({type:k});var e={base:"USD",timestamp:Date.now(),rates:{USD:(10*Math.random()).toFixed(2),GBP:(10*Math.random()).toFixed(2),EUR:(10*Math.random()).toFixed(2),RUB:(10*Math.random()).toFixed(2)}};return Promise.resolve({data:e}).then((function(e){n({type:S,payload:e})}))}},B=function(n){return function(e,t){var r=n.rates.rates;return e&&t?{rate:"USD"===e?r[t]:r[t]/r[e]}:{rate:null}}},H=R,M=function(){return function(n){return n({type:j}),Promise.resolve({isSuccessful:!0,data:[{id:1,symbol:"$",ticker:"USD",amount:1034.23},{id:2,symbol:"\xa3",ticker:"GBP",amount:420.98},{id:3,symbol:"\u20ac",ticker:"EUR",amount:276.01},{id:4,symbol:"\u20bd",ticker:"RUB",amount:41089}]}).then((function(e){n({type:g,payload:e})}),(function(){n({type:y})}))}},G=function(n){var e=n.fromAccountId,t=n.toAccountId,r=n.amount;return function(n,a){var o=a(),u=o.accounts,i=o.rates;if(u&&u.list){var s=function(n){return u.list.find((function(e){return e.id===n}))},f=s(e),l=s(t),d=c.getCurrentRate({rates:i})(f.ticker,l.ticker).rate;f.amount>=r&&n({type:E,payload:{fromAccountId:e,toAccountId:t,amount:r,rate:d}})}}},W=C,J=Object(p.createLogger)({collapsed:!0}),K=(t(39),t(2)),Y=t(3),$=t(4),q=t(25);function X(){var n=Object(K.a)(["\n  opacity: 0.6;\n"]);return X=function(){return n},n}function Q(){var n=Object(K.a)(["\n  grid-area: controls;\n\n  display: flex;\n  justify-content: center;\n\n  font-size: 32px;\n  margin-top: 4px;\n"]);return Q=function(){return n},n}function V(){var n=Object(K.a)(["\n  font-size: 28px;\n"]);return V=function(){return n},n}function Z(){var n=Object(K.a)(["\n  padding: 0 32px;\n"]);return Z=function(){return n},n}function nn(){var n=Object(K.a)(["\n  ",";\n\n  grid-area: account;\n  display: flex;\n\n  padding-left: 24px;\n  ","\n"]);return nn=function(){return n},n}function en(){var n=Object(K.a)(["\n  ",";\n\n  display: grid;\n  grid-template-columns: 1fr 48px;\n  grid-template-areas: 'account controls';\n\n  border-radius: 8px;\n  background-color: #dedede;\n"]);return en=function(){return n},n}function tn(){var n=Object(K.a)(["\n  align-items: center;\n\n  height: 80px;\n\n  cursor: pointer;\n  transition: 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return tn=function(){return n},n}var rn=Object(Y.a)(tn()),cn=Y.b.div(en(),rn),an=Y.b.div(nn(),rn,(function(n){return n.isActive&&"background: #e6f7ff"})),on=Y.b.div(Z()),un=Y.b.div(V()),sn=Y.b.div(Q()),fn=Y.b.span(X());function ln(n){var e=n.currency,t=n.total,r=n.isActive,c=new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(t).split("."),a=Object($.a)(c,2),o=a[0],u=a[1];return i.a.createElement(an,{isActive:r},i.a.createElement(un,{"data-testid":"currency-value"},i.a.createElement("span",null,o),i.a.createElement(fn,null,".",u)))}ln.defaultProps={isActive:!1};var dn=function(n){var e=n.containerRefs,t=n.handler,r=n.when,c=void 0===r||r,a=Object(u.useCallback)((function(n){var r=n.target;if(document.querySelector("body").contains(r)){for(var c=e.map((function(n){return n.current}));r;){if(c.includes(r))return;r=r.parentNode}t()}}),[e,t]);Object(u.useEffect)((function(){return c&&document.addEventListener("click",a,!0),function(){document.removeEventListener("click",a,!0)}}),[a,c])};function bn(){var n=Object(K.a)(["\n  width: 100%;\n  border-bottom: 1px solid #dedede;\n"]);return bn=function(){return n},n}function pn(){var n=Object(K.a)(["\n  position: absolute;\n  margin-top: 2px;\n  border-radius: 8px;\n  border: 1px solid #dedede;\n  background-color: white;\n  width: ",";\n\n  z-index: 100;\n"]);return pn=function(){return n},n}var mn=Y.b.div(pn(),(function(n){return"".concat(n.width,"px")})),vn=Y.b.div(bn());function On(n){var e=n.visible,t=n.options,r=n.onSelect,c=n.onClose,a=n.renderKey,o=n.renderItem,s=n.selectorRef,f=Object(u.useState)(e),l=Object($.a)(f,2),d=l[0],b=l[1],p=Object(u.useState)(0),m=Object($.a)(p,2),v=m[0],O=m[1],j=Object(u.useRef)(null);if(Object(u.useEffect)((function(){b(e)}),[e]),Object(u.useEffect)((function(){O(s.current.getBoundingClientRect().width)}),[s]),Object(u.useEffect)((function(){var n=function(){b(!1),c()};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[c]),Object(u.useEffect)((function(){var n=function(n){27===n.keyCode&&d&&(b(!1),c())};return d&&document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[d,c]),dn({containerRefs:Object(u.useMemo)((function(){return[j]}),[]),handler:function(){b(!1),c()}}),!d||!t.length)return null;var g=t.map((function(n,e){return i.a.createElement("div",{key:n[a],onClick:function(){b(!1),r(n),c()}},i.a.createElement("div",null,o(n),e<t.length-1&&i.a.createElement(vn,null)))}));return i.a.createElement(mn,{width:v,"data-testid":"container",ref:j},g)}function jn(n){var e=n.activeAccountId,t=n.accounts,r=n.onChange,c=Object(u.useCallback)((function(n){return t.find((function(e){return e.id===n}))}),[t]),a=Object(u.useRef)(),o=Object(u.useState)((function(){return c(e)})),s=Object($.a)(o,2),f=s[0],l=s[1],d=Object(u.useState)(!1),b=Object($.a)(d,2),p=b[0],m=b[1];return Object(u.useEffect)((function(){var n=c(e);l(n)}),[e,t,c]),i.a.createElement("div",null,i.a.createElement(cn,{ref:a,onClick:function(){p||m(!p)}},!f&&i.a.createElement(on,{"data-testid":"placeholder"},"Click to select an Account"),f&&i.a.createElement(ln,{currency:f.ticker,total:f.amount}),i.a.createElement(sn,null,i.a.createElement(q.a,null))),i.a.createElement(On,{selectorRef:a,visible:p,options:t,renderKey:"id",renderItem:function(n){return i.a.createElement(ln,{isActive:e===n.id,key:n.id,currency:n.ticker,total:n.amount})},onSelect:function(n){r(n.id)},onClose:function(){m(!1)}}))}function gn(){var n=Object(K.a)(["\n  display: inline-block;\n  border-radius: 2em;\n  cursor: pointer;\n  transition: all 0.2s ease 0s;\n  padding: 0.625em 1.5em;\n  line-height: 1.5em;\n  font-size: 1rem;\n  background-color: rgb(235, 0, 141);\n\n  color: white;\n\n  &[disabled] {\n    cursor: not-allowed;\n    opacity: 0.7;\n  }\n"]);return gn=function(){return n},n}jn.defaultProps={activeAccountId:null};var yn=Y.b.div(gn());function En(n){var e=n.children,t=n.onClick,r=n.disabled;return i.a.createElement(yn,{disabled:r,onClick:t},e)}function hn(){var n=Object(K.a)([""]);return hn=function(){return n},n}function xn(){var n=Object(K.a)(["\n  height: 64px;\n  background-color: transparent;\n  border: none;\n  margin: 0 24px;\n  font-size: 20px;\n\n  &:focus {\n    border: none;\n    outline: none;\n  }\n"]);return xn=function(){return n},n}function Cn(){var n=Object(K.a)(["\n  position: absolute;\n  color: #9299a2;\n  margin-top: 4px;\n  margin-left: 24px;\n  transition: 0.2s;\n  font-size: 12px;\n\n  &.empty {\n    margin-top: 17px;\n    font-size: 20px;\n    width: calc(100% - 24px);\n    height: calc(100% - 17px);\n  }\n"]);return Cn=function(){return n},n}function wn(){var n=Object(K.a)(["\n  position: relative;\n  height: 64px;\n  transition: 0.2s;\n  cursor: text;\n\n  border-radius: 8px;\n  background-color: #dedede;\n"]);return wn=function(){return n},n}var kn=Y.b.div(wn()),Sn=Y.b.small(Cn()),An=Y.b.input(xn());Y.b.small(hn());function Pn(n){var e=n.value,t=n.placeholder,r=n.onChange,c=n.onFocus,a=void 0===c?function(){}:c,o=n.onBlur,s=void 0===o?function(){}:o,f=Object(u.useState)(""),l=Object($.a)(f,2),d=l[0],b=l[1],p=Object(u.useState)(!1),m=Object($.a)(p,2),v=m[0],O=m[1],j=Object(u.useRef)();return Object(u.useEffect)((function(){b(e)}),[e]),i.a.createElement(kn,null,i.a.createElement(Sn,{"data-testid":"placeholder",onClick:function(){j.current.focus()},className:v||""!==d?"":"empty"},t),i.a.createElement(An,{"data-testid":"input",ref:j,value:d,onChange:function(n){var e=n.target.value;if(""===e)return b(e),void r(e);Number.isNaN(Number(e))||(b(e),r(e))},onFocus:function(){a(),O(!0)},onBlur:function(){s(),O(!1)}}))}var Ln=function(n){var e=String(n).split(".")[1];return e?e.length:0};function Rn(n){var e=Object(u.useRef)();return Object(u.useEffect)((function(){e.current=n}),[n]),e.current}var Fn=t(26);function In(){var n=Object(K.a)(["\n  margin: 28px 0 48px 0;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n\n  font-size: 40px;\n"]);return In=function(){return n},n}function Tn(){var n=Object(K.a)(["\n  display: flex;\n  justify-content: center;\n\n  margin-top: 40px;\n"]);return Tn=function(){return n},n}function Dn(){var n=Object(K.a)(["\n  color: #9299a2;\n"]);return Dn=function(){return n},n}function Un(){var n=Object(K.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  margin-top: 28px;\n"]);return Un=function(){return n},n}function _n(){var n=Object(K.a)(["\n  display: grid;\n\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 56px;\n  grid-row-gap: 8px;\n\n  margin-top: 40px;\n"]);return _n=function(){return n},n}function Nn(){var n=Object(K.a)(["\n  display: flex;\n  align-self: center;\n  justify-self: center;\n\n  cursor: pointer;\n"]);return Nn=function(){return n},n}function zn(){var n=Object(K.a)(["\n  margin-left: 8px;\n"]);return zn=function(){return n},n}function Bn(){var n=Object(K.a)(["\n  display: grid;\n  grid-template-columns: 1fr 40px 1fr;\n  grid-column-gap: 8px;\n  grid-row-gap: 8px;\n"]);return Bn=function(){return n},n}var Hn=Y.b.div(Bn()),Mn=Y.b.div(zn()),Gn=Object(Y.b)(Fn.a)(Nn()),Wn=Y.b.div(_n()),Jn=Y.b.div(Un()),Kn=Y.b.small(Dn()),Yn=Y.b.div(Tn()),$n=Y.b.div(In());var qn=Object(l.b)((function(n,e){return c.getCurrentRate(n)(e.fromCurrency,e.toCurrency)}))((function(n){var e=n.fromCurrency,t=n.toCurrency,r=n.rate,c=n.onChange,a=Object(u.useState)(""),o=Object($.a)(a,2),s=o[0],f=o[1],l=Object(u.useState)(""),d=Object($.a)(l,2),b=d[0],p=d[1],m=Object(u.useState)(!1),v=Object($.a)(m,2),O=v[0],j=v[1],g=Rn(e),y=Rn(t);return Object(u.useEffect)((function(){if(e&&r&&!O){var n=s*r;Ln(n)>=2&&(n=n.toFixed(2)),p(n)}else if(r){var t=b/r;Ln(t)>=2&&(t=t.toFixed(2)),f(t)}}),[b,e,t,r,s,p,O]),Object(u.useEffect)((function(){s&&b&&c({fromAmount:s,toAmount:b})}),[b,s,c]),Object(u.useEffect)((function(){e&&t&&e===y&&t===g&&(f(b),p(s))}),[e,g,t,y,b,p,s,f]),Object(u.useEffect)((function(){(!e&&g||!t&&y)&&(f(""),p(""))}),[e,g,t,y]),i.a.createElement(Wn,{"data-testid":"amounts-wrapper"},i.a.createElement(Mn,null,"You give:"),i.a.createElement(Mn,null,"You'll get:"),i.a.createElement(Pn,{placeholder:"Enter amount ".concat(e||""),value:s,onChange:function(n){if(f(n),r){var e=n*r;Ln(e)>=2&&(e=e.toFixed(2)),p(e)}else p("")}}),i.a.createElement(Pn,{placeholder:"Enter amount ".concat(t||""),value:b,onChange:function(n){if(p(n),r){var e=n/r;Ln(e)>=2&&(e=e.toFixed(2)),f(e)}else f("")},onFocus:function(){j(!0)},onBlur:function(){j(!1)}}))}));var Xn=Object(l.b)((function(n,e){return c.getCurrentRate(n)(e.fromCurrency,e.toCurrency)}))((function(n){var e=n.fromCurrency,t=n.toCurrency,r=n.rate;return e&&t?i.a.createElement(Jn,null,i.a.createElement("div",null,"Current rate for ",e,"/",t),i.a.createElement("div",null,Number(r).toFixed(2)),i.a.createElement(Kn,null,"Updates every 10 seconds")):null}));function Qn(n){var e=n.accounts,t=n.exchange,r=Object(u.useState)(),c=Object($.a)(r,2),a=c[0],o=c[1],s=Object(u.useState)(),f=Object($.a)(s,2),l=f[0],d=f[1],b=Object(u.useState)(),p=Object($.a)(b,2),m=p[0],v=p[1],O=Object(u.useState)(),j=Object($.a)(O,2),g=j[0],y=j[1],E=Object(u.useState)(),h=Object($.a)(E,2),x=h[0],C=h[1];Object(u.useEffect)((function(){var n=function(n){return e.find((function(e){return e.id===n}))},t=n(a),r=n(l);v(t),y(r)}),[a,l,e]);var w=!m||!g||m.amount<x;return i.a.createElement("div",null,i.a.createElement($n,null,"\ud83c\udfe6 Exchange Widget \ud83c\udfe6"),i.a.createElement(Hn,null,i.a.createElement(Mn,null,"From"),i.a.createElement(Mn,null),i.a.createElement(Mn,null,"To"),i.a.createElement(jn,{activeAccountId:a,accounts:e,onChange:function(n){l===n&&d(),o(n)}}),i.a.createElement(Gn,{onClick:function(){(a||l)&&(d(a),o(l))}}),i.a.createElement(jn,{activeAccountId:l,accounts:e,onChange:function(n){a===n&&o(),d(n)}})),i.a.createElement(qn,{fromCurrency:m&&m.ticker,toCurrency:g&&g.ticker,onChange:function(n){var e=n.fromAmount;C(e)}}),i.a.createElement(Xn,{fromCurrency:m&&m.ticker,toCurrency:g&&g.ticker}),i.a.createElement(Yn,null,i.a.createElement(En,{disabled:w,onClick:function(){t({fromAccountId:a,toAccountId:l,amount:x})}},"Exchange")))}function Vn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Zn(){var n=Object(K.a)(["\n  display: flex;\n  justify-content: center;\n  height: 100vh;\n\n  background-color: rgba(var(--b3f, 250, 250, 250), 1);\n\n  padding: 60px;\n  & > * {\n    width: 800px;\n  }\n"]);return Zn=function(){return n},n}var ne=Y.b.div(Zn());var ee=Object(l.b)((function(n){return{accounts:n.accounts.list,rates:n.rates.rates,isLoading:n.accounts.isLoading}}),function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Vn(t,!0).forEach((function(e){Object(m.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vn(t).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},a,{},r))((function(n){var e=n.isLoading,t=n.accounts,r=n.rates,c=n.fetchAccounts,a=n.fetchLastRates,o=n.mockRates,s=n.exchange;return Object(u.useEffect)((function(){c()}),[c,o]),Object(u.useEffect)((function(){a();var n=setInterval((function(){a()}),1e4);return function(){clearInterval(n)}}),[a]),e?null:i.a.createElement(ne,null,i.a.createElement(Qn,{accounts:t,rates:r,exchange:s}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=Object(d.e)(Object(d.c)({accounts:W,rates:H}),Object(d.d)(Object(d.a)(b.a,J)));f.a.render(i.a.createElement(l.a,{store:te},i.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.9912414f.chunk.js.map